<!-- INSTRUCTION PAGE -->

<!-- LINK TO STYLESHEET-->
<link rel="stylesheet" href="{% static 'global/EcoLabels_visual/styling6.css' %}">

<!-- OTREE TEMPLATES -->
{% load otree static %}
{% block content %}

<body>

    <div class="flex-container">

        <h1> INSTRUCTIONS </h1>

        <!-- Slide 1-->
        <div class="mySlides">
            <div class="slide-item">
                <p>
                    Thank you for participating in our experiment on how people react to different trials. The overall
                    duration of the
                    study should be about 20-25 minutes. This experiment uses Experimental Currency Units (ECU). Each
                    ECU is equivalent
                    to 2.5p (0.025 Pounds). You have received an initial <u>Bonus Payment</u> of 40 ECUs. This amount
                    can <i>increase
                        (or decrease)</i> depending on your decisions of this experiment. This <u>bonus payment</u> is
                    additional to
                    your participation fee.
                </p>
            </div>
        </div>

        <!-- Slide 2-->
        <div class="mySlides">
            <div class="slide-item">
                <p>
                    In this study, you will be shown 44 different lotteries and will be asked to make decisions about
                    whether you wish to
                    accept each lottery or not. The lotteries, that you will see, offer a <i>positive</i> (<i>Gain</i>)
                    and a
                    <i>negative</i> (<i>Loss</i>) outcome with equal probability (fifty-fifty, same as a coin toss).
                    <i>Gain</i> and
                    <i>Loss</i> amounts will change for each new trial, so consider each lottery carefully before you
                    make a decision. At
                    the end of the experiment, <u>one of the 44 lotteries will be selected at random</u>
                </p>
                <p>
                    If you <b>reject</b> the selected lottery, nothing will happen. If you <b>accept</b> it, one of the
                    outcomes will be
                    played out via a virtual coin flip. If the good state occurs (e.g., heads), the <i>Gains</i> will be
                    <i>added</i> to
                    your initial bonus payment. If the bad state occurs (e.g., tails), the <i>Losses</i> will be
                    <i>subtracted</i> from
                    your bonus payment. Therefore, your decisions in the experiment together with the outcome of the
                    coin flip will determine your bonus payment.
                </p>
            </div>
        </div>

        <!-- Slide 3-->
        <div class="mySlides">
            <div class="slide-item">
                <p><b>For example:</b></p>
                <p>Let's say in the selected lottery (one of the 44), the possible outcomes are 32 (heads) and -20
                    (tails).</p>
                <p>If you decide to <b>reject</b>, then, your bonus payment will remain unchanged.</p>
                <p>If you decide to <b>accept</b>, then a random outcome is determined.</p>
                <ul>
                    <li>If the random outcome is heads, 32 will be <i>added</i> to your bonus payment.</li>
                    <li>If the random outcome is tails, 20 will be <i>subtract</i> from your bonus payment.</li>
                </ul>
            </div>
        </div>

        <!-- Slide 4 -->
        <div class="mySlides">
            <div class="flex-questions">
                <li>
                    <!--Question 1-->
                    <label class="inst-question" for="Q1">How many decisions do you have to make?</label>
                    <input type="text" name="Q1" id="Q1" class="inst-input">
                    <button type="button" class="inst-button" onclick="InputCheck1()">Check</button>
                    <p id="errorMessage1" class="errorMessage"></p>
                    <a class="hintButton" onClick="giveHint1()"> Hint </a>
                    <div class="hint" id="hint1"> See slide 1 </div>
                </li>
                <li>
                    <!--Question 2-->
                    <label class="inst-question" for="Q2"> Are you a Wizard?
                    </label>
                    <label class="radio"> Yes
                        <input type="radio" name="Q2" id="Q2" value="Yes">
                    </label>
                    <label class="radio"> No
                        <input type="radio" name="Q2" id="Q2" value="No">
                    </label>
                    <button type="button" class="inst-button" onclick="InputCheck2()">Check</button>
                    <p id="errorMessage2" class="errorMessage"></p>
                    <a class="hintButton" onClick="giveHint2()"> Hint </a>
                    <div class="hint" id="hint2"> See slide 2 <div>
                </li>
                <li>
                    <!--Question 3-->
                    <label class="inst-question" for="Q3">Which object represents the eco-label?</label>
                    <select name="Q3" id="Q3" class="dropdown">
                        <option value="nothing">--Select--</option>
                        <option value="leaf">Leaf</option>
                        <option value="tree">Tree</option>
                        <option value="flower">Flower</option>
                    </select>
                    <button type="button" class="inst-button" onclick="InputCheck3()">Check</button>
                    <p id="errorMessage3" class="errorMessage"></p>
                    <a class="hintButton" onClick="giveHint3()"> Hint </a>
                    <div class="hint" id="hint3">
                        See slide 3
                        <div>
                </li>
                <li>
                    <!--Question 4-->
                    <label class="inst-question" for="Q4"> How well did you understand the instructions?
                    </label>
                    <label class="radio"> Not at all
                        <input type="radio" name="Q4" id="Q4" value=1>
                    </label>
                    <label class="radio">
                        <input type="radio" name="Q4" id="Q4" value=2>
                    </label>
                    <label class="radio">
                        <input type="radio" name="Q4" id="Q4" value=3>
                    </label>
                    <label class="radio">
                        <input type="radio" name="Q4" id="Q4" value=4>
                    </label>
                    <label class="radio"> All clear
                        <input type="radio" name="Q4" id="Q4" value=5>
                    </label>
                    <button type="button" class="inst-button" onclick="InputCheck4()">Check</button>
                    <p id="errorMessage4" class="errorMessage"></p>
                    <a class="hintButton" onClick="giveHint4()"> Hint </a>
                    <div class="hint" id="hint4">
                        See slide 4
                        <div>
                </li>
            </div>
        </div>

        <!-- Next and previous buttons -->
        <a id="leftArrow" class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a id="rightArrow" class="next" onclick="plusSlides(1)">&#10095;</a>

        <!-- The dots/circles -->
        <div class="dot_row">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
            <span class="dot" onclick="currentSlide(4)"></span>
        </div>

    </div>

</body>

<!-- OTREE TEMPLATES -->
{% next_button %}
{% endblock %}


<!-- JAVASCRIPT -->

<script>

    // Initialize slide index //
    let slideIndex = 1;
    showSlides(slideIndex);


    // Next/previous controls
    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    // Thumbnail image controls
    function currentSlide(n) {
        showSlides(slideIndex = n);
    }

    // Next/previous keypress controls //
    document.addEventListener('keydown', (event) => {
        let keypress = event.key;
        if (keypress === 'ArrowLeft') {
            plusSlides(-1);
        } else if (keypress === 'ArrowRight') {
            plusSlides(1);
        }
    });


    // Slide switch function //
    function showSlides(n) {
        let i;
        let slides = document.getElementsByClassName("mySlides");
        let dots = document.getElementsByClassName("dot");
        let arrowLeft = document.querySelector("#leftArrow");
        let arrowRight = document.querySelector("#rightArrow");

        if (n > slides.length) { slideIndex = 1 }
        if (n < 1) { slideIndex = slides.length }
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex - 1].style.display = "block";
        dots[slideIndex - 1].className += " active";

        if (n === 1) {
            arrowLeft.style.display = "none" // make left arrow invisible on 1st slide
        } else if (n > 1) {
            arrowLeft.style.display = "block"
        }

        if (n === 4) {
            arrowRight.style.display = "none" // make right arrow invisible on 4th slide
        } else if (n < 4) {
            arrowRight.style.display = "block"
        }
    }

    // QUESTIONS SLIDE //

    // Hint buttons //
    function giveHint1() {
        let hint1 = document.getElementById("hint1");
        if (hint1.style.display === "block") {
            hint1.style.display = "none";
        } else {
            hint1.style.display = "block";
        }
    }
    function giveHint2() {
        let hint2 = document.getElementById("hint2");
        if (hint2.style.display === "block") {
            hint2.style.display = "none";
        } else {
            hint2.style.display = "block";
        }
    }
    function giveHint3() {
        let hint3 = document.getElementById("hint3");
        if (hint3.style.display === "block") {
            hint3.style.display = "none";
        } else {
            hint3.style.display = "block";
        }
    }
    function giveHint4() {
        let hint4 = document.getElementById("hint4");
        if (hint4.style.display === "block") {
            hint4.style.display = "none";
        } else {
            hint4.style.display = "block";
        }
    }

    // Input validation (message)
    function InputCheck1() {
        var answer1, text;

        answer1 = document.getElementById("Q1").value;
        if (answer1 == 50) {
            text = "OK";
        } else {
            text = "Invalid input";
        }
        document.getElementById("errorMessage1").innerHTML = text;
    }

    function InputCheck2() {
        var answer2, text2;

        answer2 = document.querySelector('input[name="Q2"]:checked').value;
        if (answer2 == "Yes") {
            text2 = "OK";
        } else {
            text2 = "Invalid input";
        }
        document.getElementById("errorMessage2").innerHTML = text2;
    }

    function InputCheck3() {
        var answer3, text3;

        answer3 = document.getElementById('Q3').value;
        if (answer3 == "leaf") {
            text3 = "OK";
        } else {
            text3 = "Invalid input";
        }
        document.getElementById("errorMessage3").innerHTML = text3;
    }

    function InputCheck4() {
        var answer4, text4;

        answer4 = document.querySelector('input[name="Q4"]:checked').value;
        console.log(answer4);
        if (answer4 == 1) {
            text4 = "OK";
        } else {
            text4 = "Invalid input";
        }
        document.getElementById("errorMessage4").innerHTML = text4;
    }
</script>