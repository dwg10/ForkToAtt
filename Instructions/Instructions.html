<!-- INSTRUCTION PAGE -->

<!-- LINK TO STYLESHEET-->
<link rel="stylesheet" href="{% static 'global/EcoLabels_visual/styling10.css' %}">

<!-- Set viewport -->
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- oTree templates -->
{% load otree static %}
{% block content %}

<body>

    <!-- Slide container-->
    <div class="flex-container">

        <!-- Title -->
        <h1> Instructions </h1>

        <!-- Slide 1-->

        <!-- Hide slide by default-->
        <div class="mySlides">

            <!-- Style slide items-->
            <div class="slide-item">

                <!-- Slide title -->
                <p class="title"> The Experiment </p>

                <!-- Slide text -->
                <p>
                    In this study you will make purchasing decisions. The products that you will observe are
                    <b>artificial</b>. There is no
                    physical product, but your <u>decisions</u> will have <b>real consequences.</b>
                    <br><br>
                    Depending on your <u>decisions</u> you can obtain an
                    additional <b>bonus payment up to €XX</b>. Also, depending your decisions you can help the
                    environment by <b>planting trees in the
                        Amazon</b>.
                </p>
            </div>
        </div>

        <!-- Slide 2-->
        <div class="mySlides">
            <div class="slide-item">
                <p class="title">The Benefits</p>
                <p>
                    In this experiment you will make multiple rounds <b>(NNN)</b> of a purchasing decision. In each
                    round you
                    will see <b>two products</b>. These products are not real, but their benefits are. Products can
                    grant you two benefits:
                    <br><br>
                    1. <b>Bonus Payment:</b> The products will have a level of <b>‘Quality’</b>. Products with <b>higher
                        quality</b>, will
                    lead to <b>higher bonus
                        payments.</b>
                    <br>
                    2. <b>Planting trees in the Amazon:</b> The products will have a level of <b>‘Sustainability’</b>.
                    Products with
                    <b>higher
                        sustainability</b>, will lead to <b>more trees planted in the Amazon.</b>
                    <br><br>
                    You need to choose one of the <b>two products</b> to <u>purchase.</u> By the end of the experiment,
                    we will
                    <b>randomly select one of the
                        rounds</b> and you will obtain the benefits of your purchased product in that round. The <b>cost
                        of the
                        product</b> will be
                    subtracted from your <b>bonus payment.</b> The cost will never be higher than the benefit, so do not
                    worry,
                    you will never lose
                    anything.
                </p>

            </div>
        </div>

        <!-- Slide 3-->
        <div class="mySlides">
            <div class="slide-item">
                <p class="title">The Product characteristics</p>
                <p>
                    In each round, we will show you the two products and their characteristics:
                </p>
                <p>
                    <b>Price:</b> Cost you need to pay for the product.
                    <br><br>
                    <b>Quality:</b> 1-3 star (ADD SYMBOL) rating. Products with more stars (ADD SYMBOL)
                    are more likely to
                    have higher quality.
                    <br><br>
                    <b>Eco-Label:</b> 1-3 leaf (ADD SYMBOL) rating. Products with more leaves (ADD SYMBOL) are more
                    likely
                    to be more sustainable.
                </p>
            </div>
        </div>

        <!-- Slide 4 -->
        <div class="mySlides">
            <div class="slide-item">
                <p class="title"> Purchasing Platform </p>
                <div>
                    <p>
                        The product characteristics (Price, Quality and Eco-Label) for each product will be behind
                        <i>‘boxes’.</i> To reveal the
                        information, all you need to do is to move your mouse on top of the <i>‘box’</i> and the
                        information will be revealed. Here is
                        an example, <u>try moving your mouse on top of the boxes.</u>
                    </p>
                </div>
            </div>
        </div>

        <!-- Slide 5 -->
        <div class="mySlides">
            <div class="slide-item">
                <p class="title"> The Choice </p>
                <div>
                    <p>
                        Once you have analyzed the products, you can choose between one of them. Below the
                        characteristics, you will find one
                        button for each option. To choose one product, just click the corresponding button below. <u>Try
                            clicking one.</u>
                    </p>
                </div>
            </div>
        </div>

        <!-- Slide 6 (Questions) -->
        <div class="mySlides">
            <!-- Question slide container-->
            <div class="flex-questions">
                <p class="title-questions"> Is it all clear? Please answer these questions correctly to proceed:</p>
                <li>
                    <!--Question 1-->
                    <div class="inst-question">
                        <!-- Question-->
                        <label for="Q1">How many practice trials does the experiment have?</label>
                    </div>
                    <div class="answer-field">
                        <!-- Input field -->
                        <input type="text" name="Q1" id="Q1" style="width: 9vw; height: 6vh">
                    </div>
                    <div class="hint" id="hint1">
                        <!-- Hint -->
                        Incorrect: see slide 3
                        <div>
                </li>
                <li>
                    <!--Question 2-->
                    <div class="inst-question">
                        <label for="Q2">The Bonus Payment is calculated based on your decisions in …</label>
                    </div>
                    <div class="answer-field">
                        <select name="Q2" id="Q2" class="dropdown">
                            <option value="nothing">--Select--</option>
                            <option value="a">all the trials</option>
                            <option value="b">the first trial</option>
                            <option value="c">a random trial</option>
                        </select>
                    </div>
                    <div class="hint" id="hint2">
                        Incorrect: see slide 2
                        <div>
                </li>
                <li>
                    <!--Question 3-->
                    <div class="inst-question">
                        <label for="Q3">How many trials are there in total?</label>
                    </div>
                    <div class="answer-field">
                        <select name="Q3" id="Q3" class="dropdown">
                            <option value="nothing">--Select--</option>
                            <option value="a">20</option>
                            <option value="b">50</option>
                            <option value="c">40</option>
                        </select>
                    </div>
                    <div class="hint" id="hint3">
                        Incorrect: see slide 1
                        <div>
                </li>
                <li>
                    <!-- Submit answers and Next button (next button appears when user answers all questions correctly)-->
                    <a id="submitAnswer" class="button" onclick=validateAnswers()>Submit
                    </a>
                    <button id="submit" class="button">Next</button>
                </li>
            </div>
        </div>

        <!-- Next and previous buttons -->
        <a id="leftArrow" class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a id="rightArrow" class="next" onclick="plusSlides(1)">&#10095;</a>

        <!-- The dots/circles -->
        <div class="dot_row">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
            <span class="dot" onclick="currentSlide(4)"></span>
            <span class="dot" onclick="currentSlide(5)"></span>
            <span class="dot" onclick="currentSlide(6)"></span>
        </div>

    </div>

</body>

<!-- oTree templates -->
{% endblock %}


<!-- JAVASCRIPT -->

<script>

    // Initialize slide index //
    let slideIndex = 1;
    showSlides(slideIndex);


    // Next/previous controls
    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    // Thumbnail image controls
    function currentSlide(n) {
        showSlides(slideIndex = n);
    }

    // Next/previous keypress controls //
    document.addEventListener('keydown', (event) => {
        let keypress = event.key;
        if (keypress === 'ArrowLeft') {
            plusSlides(-1);
        } else if (keypress === 'ArrowRight') {
            plusSlides(1);
        }
    });

    // Slide switch function //
    function showSlides(n) {
        let i; // slide count
        let slides = document.getElementsByClassName("mySlides"); // get slides
        let dots = document.getElementsByClassName("dot"); // get dots
        let arrowLeft = document.querySelector("#leftArrow"); // get left arrow
        let arrowRight = document.querySelector("#rightArrow"); // get right arrow

        if (n > slides.length) { slideIndex = 1 } // make slides visible/hide based on slide count
        if (n < 1) { slideIndex = slides.length }
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) { // change dot color based on dot count
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex - 1].style.display = "block"; // make slides visible/hide based on slide count
        dots[slideIndex - 1].className += " active"; // change dot color based on dot count

        if (n === 1) {
            arrowLeft.style.display = "none" // make left arrow invisible on 1st slide
        } else if (n > 1) {
            arrowLeft.style.display = "block"
        }

        if (n === slides.length) {
            arrowRight.style.display = "none" // make right arrow invisible on 4th slide
        } else if (n < slides.length) {
            arrowRight.style.display = "block"
        }
    }

    // QUESTIONS SLIDE //

    // This function runs when "Submit" button is clicked. It compares all the inputs to question with solutions; if input is incorrect or empty, hint appears next to it. If the answer is correct, the function makes hint invisible again. If all inputs are correct, "Next" button will become visible. 

    let submitButton = document.getElementById("submitAnswer"); // get submit button
    let nextButton = document.getElementById("submit"); // get Next button

    nextButton.style.display = "none" // Hide Next button

    function validateAnswers() {

        let solutions = ['3', 'a', 'a']; // solutions
        let hints = document.getElementsByClassName("hint"); // make array of hints

        // get answer fields
        let A1 = document.getElementById("Q1");
        let A2 = document.getElementById("Q2");
        let A3 = document.getElementById("Q3");

        let answerList = [A1, A2, A3]; // create an array out of the answers
        let correct = 0; // initialize counter for correct answers

        for (i = 0; i < answerList.length; i++) { // iterate through answers
            if (answerList[i] !== null) { // check for empty fields
                answerList[i] = answerList[i].value; // get value if not empty
            }
            if (answerList[i] !== solutions[i] || answerList[i] === null) { // incorrect or empty field: show hint
                hints[i].style.visibility = "visible";
            } else {
                correct = correct + 1; // correct: increase counter, hide hint
                hints[i].style.visibility = "hidden";

            }
        }
        if (correct === answerList.length) { // if all correct, hide Submit button and show Next button
            submitButton.style.display = "none"
            nextButton.style.display = "block"
        }

    }
</script>